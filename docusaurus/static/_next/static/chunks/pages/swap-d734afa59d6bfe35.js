(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[503],{98229:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/swap",function(){return t(8661)}])},8661:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return Ye}});var r=t(34051),o=t.n(r),i=t(85893),c=t(67294),a=t(24734),u=t(73732),s=t(68803),l=t(59128),d=t(82596);function f(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function m(e,n,t,r,o,i,c){try{var a=e[i](c),u=a.value}catch(s){return void t(s)}a.done?n(u):Promise.resolve(u).then(r,o)}function p(e){return function(){var n=this,t=arguments;return new Promise((function(r,o){var i=e.apply(n,t);function c(e){m(i,r,o,c,a,"next",e)}function a(e){m(i,r,o,c,a,"throw",e)}c(void 0)}))}}function v(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,o,i=[],c=!0,a=!1;try{for(t=t.call(e);!(c=(r=t.next()).done)&&(i.push(r.value),!n||i.length!==n);c=!0);}catch(u){a=!0,o=u}finally{try{c||null==t.return||t.return()}finally{if(a)throw o}}return i}}(e,n)||function(e,n){if(!e)return;if("string"===typeof e)return f(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return f(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(e){return x.apply(this,arguments)}function x(){return(x=p(o().mark((function e(n){var t;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=2;break}return e.abrupt("return",[]);case 2:return e.next=4,(0,d.Z)("https://api.coingecko.com/api/v3/coins/".concat(n,"/market_chart?vs_currency=usd&days=1"),{cacheFreshTime:6e4});case 4:if(t=e.sent){e.next=7;break}return e.abrupt("return",[]);case 7:return e.abrupt("return",t.prices.map((function(e){return v(e,2)[1]})));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var y=t(55318),b=t(79353),g=t(10158),Z=t(76700),w=t(49552),j=t(71633),S=t(78670),k=t(10723),A=t(82545),C=t(32178),P=t(85928),N=t(30992);function I(e,n,t,r,o,i,c){try{var a=e[i](c),u=a.value}catch(s){return void t(s)}a.done?n(u):Promise.resolve(u).then(r,o)}function T(){return(0,k.Z)(function(){var e,n=(e=o().mark((function e(n){var t,r,i,c,a,u,s,l,d,f,m,p,v,h,x,k,I,T,E,R,B,D,O,F,M,L,W,q,U,$,_,H;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.transactionCollector,r=n.baseUtils,i=r.connection,c=r.owner,a=A.Z.getState(),u=a.checkWalletHasEnoughBalance,s=a.tokenAccountRawInfos,l=C.Z.getState(),d=l.coin1,f=l.coin2,m=l.coin1Amount,p=l.coin2Amount,v=l.routes,l.focusSide,h=l.routeType,x=l.directionReversed,k=l.minReceived,I=l.maxSpent,T=x?f:d,E=(x?p:m)||"0",R=x?d:f,B=(x?m:p)||"0",(0,b.Z)(E&&(0,w.gt)(E,0),"should input upCoin amount larger than 0"),(0,b.Z)(B&&(0,w.gt)(B,0),"should input downCoin amount larger than 0"),(0,b.Z)(T,"select a coin in upper box"),(0,b.Z)(R,"select a coin in lower box"),(0,b.Z)(String(T.mint)!==String(R.mint),"should not select same mint "),(0,b.Z)(v,"can't find correct route"),D=(0,Z.n)(T,E,{alreadyDecimaled:!0}),(0,Z.n)(R,B,{alreadyDecimaled:!0}),(0,b.Z)(u(D),"not enough ".concat(T.symbol)),(0,b.Z)(h,"accidently routeType is undefined"),e.next=19,y.hoX.makeTradeTransaction({connection:i,routes:v,routeType:h,fixedSide:"in",userKeys:{tokenAccounts:s,owner:c},amountIn:(0,P.wO)(D),amountOut:(0,P.wO)((0,Z.n)(R,k,{alreadyDecimaled:!0}))});case 19:return O=e.sent,F=O.setupTransaction,M=O.tradeTransaction,e.t0=N.Do,e.next=25,(0,g.Z)([F,M],(function(e){if(e){var n=e.transaction,t=e.signers;return(0,S.G)({transaction:n,signers:t})}}));case 25:for(e.t1=e.sent,L=(0,e.t0)(e.t1),W=!0,q=!1,U=void 0,e.prev=28,$=L[Symbol.iterator]();!(W=(_=$.next()).done);W=!0)H=_.value,t.add(H,{txHistoryInfo:{title:"Swap",description:"Swap ".concat((0,j.B)(E)," ").concat(T.symbol," to ").concat((0,j.B)(k||I)," ").concat(R.symbol)}});e.next=36;break;case 32:e.prev=32,e.t2=e.catch(28),q=!0,U=e.t2;case 36:e.prev=36,e.prev=37,W||null==$.return||$.return();case 39:if(e.prev=39,!q){e.next=42;break}throw U;case 42:return e.finish(39);case 43:return e.finish(36);case 44:case"end":return e.stop()}}),e,null,[[28,32,36,44],[37,,39,43]])})),function(){var n=this,t=arguments;return new Promise((function(r,o){var i=e.apply(n,t);function c(e){I(i,r,o,c,a,"next",e)}function a(e){I(i,r,o,c,a,"throw",e)}c(void 0)}))});return function(e){return n.apply(this,arguments)}}())}var E=t(11163),R=t(42137),B=t(43003),D=t(68393),O=t(80110),F=t(65873),M=t(75163),L=t(50354);function W(e,n,t,r,o,i,c){try{var a=e[i](c),u=a.value}catch(s){return void t(s)}a.done?n(u):Promise.resolve(u).then(r,o)}function q(e){return function(){var n=this,t=arguments;return new Promise((function(r,o){var i=e.apply(n,t);function c(e){W(i,r,o,c,a,"next",e)}function a(e){W(i,r,o,c,a,"throw",e)}c(void 0)}))}}function U(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function $(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){U(e,n,t[n])}))}return e}function _(){var e=(0,E.useRouter)().pathname,n=(0,O.ZP)((function(e){return e.connection})),t=(0,C.Z)((function(e){return e.coin1})),r=(0,C.Z)((function(e){return e.coin2})),i=(0,C.Z)((function(e){return e.coin1Amount})),a=(0,C.Z)((function(e){return e.coin2Amount})),s=(0,C.Z)((function(e){return e.refreshCount})),l=(0,C.Z)((function(e){return e.directionReversed})),d=l?"coin2":"coin1",f=(0,u.Z)((function(e){return e.slippageTolerance})),m=(0,A.Z)((function(e){return e.connected})),p=l?r:t,v=(l?a:i)||"0",h=l?t:r,x=(l?i:a)||"0",b=(0,F.Z)((function(e){return e.jsonInfos}));(0,c.useEffect)((function(){H.clear()}),[s]),(0,D.Z)(q(o().mark((function c(){var u,s,l,m,b,g,Z,S,k,A,P,N,I,T,E,R,B,D,O,F,M,W,q,_,H,V;return o().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:if(p&&h&&n&&e.startsWith("/swap")){o.next=3;break}return C.Z.setState($({fee:void 0,minReceived:void 0,maxSpent:void 0,routes:void 0,priceImpact:void 0,executionPrice:void 0},U({},"coin1"===d?"coin2Amount":"coin1Amount",void 0))),o.abrupt("return");case 3:if(u="up",!((0,L.aT)(t,r)&&(0,L.aT)(t,y.VbZ.mint))){o.next=10;break}if(!(0,w.eq)(i,a)){o.next=8;break}return o.abrupt("return");case 8:return C.Z.setState($({fee:void 0,minReceived:void 0,maxSpent:void 0,routes:void 0,priceImpact:void 0,executionPrice:void 0},U({},"coin1"===d?"coin2Amount":"coin1Amount","coin1"===d?(0,j.B)(i):(0,j.B)(a)))),o.abrupt("return");case 10:return o.prev=10,o.next=13,z({upCoin:p,upCoinAmount:v,downCoin:h,downCoinAmount:x,connection:n,focusSide:u,slippageTolerance:f});case 13:if(s=o.sent,function(){var e=C.Z.getState().directionReversed,n=(e?C.Z.getState().coin2Amount:C.Z.getState().coin1Amount)||"0",t=(e?C.Z.getState().coin1Amount:C.Z.getState().coin2Amount)||"0",r="up"===u?n:t,o="up"===u?v:x;return(0,w.eq)(r,o)}()){o.next=17;break}return o.abrupt("return");case 17:"up"===u?(m=(l=null!==s&&void 0!==s?s:{}).routes,b=l.priceImpact,g=l.executionPrice,Z=l.currentPrice,S=l.swapable,k=l.routeType,A=l.fee,N=null!==(P=null===s||void 0===s?void 0:s.info)&&void 0!==P?P:{},I=N.amountOut,T=N.minAmountOut,C.Z.setState($({fee:A,routes:m,priceImpact:b,executionPrice:g,currentPrice:Z,minReceived:T,maxSpent:void 0,swapable:S,routeType:k},U({},"coin1"===d?"coin2Amount":"coin1Amount",I)))):(R=(E=null!==s&&void 0!==s?s:{}).routes,B=E.priceImpact,D=E.executionPrice,O=E.currentPrice,F=E.swapable,M=E.routeType,W=E.fee,_=null!==(q=null===s||void 0===s?void 0:s.info)&&void 0!==q?q:{},H=_.amountIn,V=_.maxAmountIn,C.Z.setState($({fee:W,routes:R,priceImpact:B,executionPrice:D,currentPrice:O,minReceived:void 0,maxSpent:V,swapable:F,routeType:M},U({},"coin1"===d?"coin2Amount":"coin1Amount",H)))),o.next=23;break;case 20:o.prev=20,o.t0=o.catch(10),console.error(o.t0);case 23:case"end":return o.stop()}}),c,null,[[10,20]])}))),[p,h,v,x,l,d,f,n,e,s,m,b])}var H=new Map;function z(e){return V.apply(this,arguments)}function V(){return V=q(o().mark((function e(n){var t,r,i,c,a,u,s,l,d,f,m,p,v,h,x,b,g,w,j,S,k,A,C,I;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.upCoin,r=n.upCoinAmount,i=n.downCoin,c=n.downCoinAmount,n.focusSide,a=n.connection,u=n.slippageTolerance,s=(0,Z.n)(t,r,{alreadyDecimaled:!0}),(0,Z.n)(i,c,{alreadyDecimaled:!0}),e.next=5,F.Z.getState().findLiquidityInfoByTokenMint(t.mint,i.mint);case 5:if(l=e.sent,!(d=l.routeRelated).length){e.next=23;break}if(f=d.map((function(e){return e.id})).join("-"),!H.has(f)){e.next=13;break}e.t0=H.get(f),e.next=16;break;case 13:return e.next=15,q(o().mark((function e(){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,M.Z)(d,a);case 2:return n=e.sent,H.set(f,n),e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})))();case 15:e.t0=e.sent;case 16:return m=e.t0,p=d.map((function(e,n){return{poolKeys:(0,y.Rl)(e),poolInfo:m[n]}})),v=y.hoX.getBestAmountOut({pools:p,currencyOut:(0,P.et)(i),amountIn:(0,P.wO)(s),slippage:(0,B.y)(u)}),h=v.amountOut,x=v.minAmountOut,b=v.executionPrice,g=v.currentPrice,w=v.priceImpact,j=v.routes,S=v.routeType,k=v.fee,A=new Map(m.map((function(e){return[(0,R.Z)(e.id),e]}))),C=(0,N.Do)(j.map((function(e){return A.get((0,R.Z)(e.keys.id))}))),I=C.every((function(e){return y.ZpI.getEnabledFeatures(e).swap})),e.abrupt("return",{executionPrice:b,currentPrice:g,priceImpact:w,routes:j,routeType:S,swapable:I,fee:k,info:{amountOut:(0,P.wE)(h).toExact(),minAmountOut:(0,P.wE)(x).toExact()}});case 23:case"end":return e.stop()}}),e)}))),V.apply(this,arguments)}var G=t(15441),K=t(15752);var Y=t(16176),X=t(23264);function J(){var e=(0,E.useRouter)(),n=e.query,t=e.pathname,r=e.replace,o=(0,C.Z)((function(e){return e.coin1})),i=(0,C.Z)((function(e){return e.coin2})),a=(0,C.Z)((function(e){return e.coin1Amount})),l=(0,C.Z)((function(e){return e.coin2Amount})),d=(0,C.Z)((function(e){return e.focusSide})),f=(0,C.Z)((function(e){return e.directionReversed})),m=(0,F.Z)((function(e){return e.jsonInfos})),p=(0,c.useCallback)((function(e){return m.find((function(n){return n.id===e}))}),[m]),v=(0,G.ZP)((function(e){return e.tokens})),h=(0,G.ZP)((function(e){return e.getToken})),x=(0,G.ZP)((function(e){return e.toUrlMint})),y=(0,u.Z)((function(e){return e.inCleanUrlMode})),b=(0,c.useRef)(!1);(0,c.useEffect)((function(){t.includes("/swap")||(b.current=!1)}),[t]),(0,c.useEffect)((function(){var e=function(){return b.current=!1};return null===globalThis||void 0===globalThis||globalThis.addEventListener("beforeunload",e),function(){return null===globalThis||void 0===globalThis?void 0:globalThis.removeEventListener("beforeunload",e)}}),[]),(0,c.useEffect)((function(){if(t.includes("/swap")&&!b.current){var e,r,o,i,c,a,u,l,x=String(null!==(r=null!==(e=n.ammId)&&void 0!==e?e:n.ammid)&&void 0!==r?r:""),y=String(null!==(o=n.inputCurrency)&&void 0!==o?o:""),g=String(null!==(i=n.outputCurrency)&&void 0!==i?i:""),Z=String(null!==(c=n.inputAmount)&&void 0!==c?c:""),w=String(null!==(a=n.outputAmount)&&void 0!==a?a:""),j=String(null!==(u=n.fixed)&&void 0!==u?u:"");if(l=g,"sol"===y&&l===(0,R.Z)(P.DA))C.Z.setState({coin1:P.aF,coin2:P.FI});else if(function(e,n){return e===(0,R.Z)(P.DA)&&"sol"===n}(y,g))C.Z.setState({coin1:P.FI,coin2:P.aF});else if(x){var S=s.Z.getState().logWarning,k=p(x);if(k){var A=y?h(y,{exact:!0}):h(g?null===k||void 0===k?void 0:k.quoteMint:null===k||void 0===k?void 0:k.baseMint),I=g?h(g,{exact:!0}):h(y?null===k||void 0===k?void 0:k.baseMint:null===k||void 0===k?void 0:k.quoteMint);(0,N.CW)([y,g],[String(null===A||void 0===A?void 0:A.mint),String(null===I||void 0===I?void 0:I.mint)])||C.Z.setState((0,X.dI)({coin1:A,coin2:I}))}else m.length>0&&Object.keys(v||{}).length>0&&S("can't find Liquidity pool with url ammId")}else if(y||g){var T=h(y),E=h(g);T&&C.Z.setState({coin1:T}),E&&C.Z.setState({coin2:E})}var B=y?Z:g?w:void 0,D=g?w:y?Z:void 0;if(B&&C.Z.setState({coin1Amount:B}),D&&C.Z.setState({coin2Amount:D}),("in"===j||"out"===j)&&(f?"coin2"===d?"in":"out":"coin2"===d?"out":"in")!==j){var O="in"===j?f?"coin2":"coin1":f?"coin1":"coin2";C.Z.setState({focusSide:O})}m.length>0&&Object.values(v).length>0&&(b.current=!0)}}),[t,n,h,v,r,m,p]);var g=(0,c.useCallback)((0,Y.P)((function(e,n){r({pathname:e,query:n},void 0,{shallow:!0})}),{delay:100}),[]);(0,c.useEffect)((function(){if(t.includes("/swap")&&b.current&&!y){var e,r,c,u,s,m=o?x(o):"",p=i?x(i):"",v=f?p:m,h=f?m:p,Z=f?l:a,w=f?a:l,S=(0,X.dI)({inputCurrency:String(null!==(e=n.inputCurrency)&&void 0!==e?e:""),outputCurrency:String(null!==(r=n.outputCurrency)&&void 0!==r?r:""),inputAmount:String(null!==(c=n.inputAmount)&&void 0!==c?c:""),outputAmount:String(null!==(u=n.outputAmount)&&void 0!==u?u:""),fixed:String(null!==(s=n.fixed)&&void 0!==s?s:"")}),k=(0,X.dI)({inputCurrency:v,outputCurrency:h,inputAmount:(0,j.B)(Z),outputAmount:(0,j.B)(w),fixed:f?"coin2"===d?"in":"out":"coin2"===d?"out":"in"});!(0,L.Ek)(S,k)&&g(t,k)}}),[y,o,i,a,l,f,d,n,r,t])}var Q=t(37543),ee=t(84055),ne=t(86224),te=t(10317),re=t(96720),oe=t(10959),ie=t(84699),ce=t(45674),ae=t(24666),ue=t(53522),se=t(68998),le=t(55740),de=t(88644),fe=t(70242),me=t(99693),pe=t(31992),ve=t(61118),he=t(65629),xe=t(51772),ye=t(84975),be=t(51045),ge=t(80546),Ze=t(26209),we=t(7432);function je(e,n,t,r,o,i,c){try{var a=e[i](c),u=a.value}catch(s){return void t(s)}a.done?n(u):Promise.resolve(u).then(r,o)}function Se(e,n,t){var r,i=(0,c.useState)(t),a=i[0],u=i[1],s=(0,c.useRef)(0),l=(0,c.useRef)(0);return(0,D.Z)((r=o().mark((function n(){var t,r;return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=l.current,l.current+=1,s.current=t,n.next=5,(0,we.u)(e);case 5:if(r=n.sent,t!=s.current){n.next=10;break}return n.abrupt("return",u(r));case 10:return n.abrupt("return",void 0);case 11:case"end":return n.stop()}}),n)})),function(){var e=this,n=arguments;return new Promise((function(t,o){var i=r.apply(e,n);function c(e){je(i,t,o,c,a,"next",e)}function a(e){je(i,t,o,c,a,"throw",e)}c(void 0)}))}),null!==n&&void 0!==n?n:[]),a}var ke=t(23612),Ae=t(86516),Ce=t(3342),Pe=t(18748);function Ne(e,n,t){var r,o="all .4s cubic-bezier(0.4, 0, 0.2, 1)",i=(0,c.useState)(null!==(r=null===t||void 0===t?void 0:t.defaultHasWrapped)&&void 0!==r&&r),a=i[0],u=i[1];(0,c.useEffect)((function(){if(!Pe.N9&&(null===t||void 0===t?void 0:t.defaultHasWrapped)){var r=e.current,o=n.current;if(r&&o){var i=r.getBoundingClientRect(),c=o.getBoundingClientRect(),a=c.top-i.top,u=i.top<c.top?1:-1;r.style.setProperty("transition",""),o.style.setProperty("transition",""),r.style.setProperty("transform","translateY(".concat(a*u,"px)")),o.style.setProperty("transform","translateY(".concat(-a*u,"px)"))}}}),[]);var s=(0,c.useCallback)((function(){var t=e.current,r=n.current;if(t&&r){var i=t.getBoundingClientRect(),c=r.getBoundingClientRect(),s=c.top-i.top,l=i.top<c.top?1:-1;t.style.setProperty("transition",o),r.style.setProperty("transition",o),a?(t.style.setProperty("transform","translateY(0px)"),r.style.setProperty("transform","translateY(0px)"),u(!1)):(t.style.setProperty("transform","translateY(".concat(s*l,"px)")),r.style.setProperty("transform","translateY(".concat(-s*l,"px)")),u(!0))}}),[a,e,n]),l=(0,c.useCallback)((function(){var t=e.current,r=n.current;t&&r&&(t.style.setProperty("transition",o),r.style.setProperty("transition",o),t.style.setProperty("transform","translateY(0px)"),r.style.setProperty("transform","translateY(0px)"))}),[a,e,n]);return(0,c.useEffect)((function(){var t=e.current,r=n.current;null===t||void 0===t||t.addEventListener("transitionstart",(function(){null===t||void 0===t||t.style.setProperty("pointerEvents","none")})),null===t||void 0===t||t.addEventListener("transitionend",(function(){null===t||void 0===t||t.style.setProperty("pointerEvents","")})),null===r||void 0===r||r.addEventListener("transitionstart",(function(){null===r||void 0===r||r.style.setProperty("pointerEvents","none")})),null===r||void 0===r||r.addEventListener("transitionend",(function(){null===r||void 0===r||r.style.setProperty("pointerEvents","")}))}),[e,n]),[a,{toggleSwap:s,resetSwapPosition:l}]}var Ie=t(93198),Te=t(68155),Ee=t(38983);function Re(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function Be(e,n,t,r,o,i,c){try{var a=e[i](c),u=a.value}catch(s){return void t(s)}a.done?n(u):Promise.resolve(u).then(r,o)}function De(e){return function(){var n=this,t=arguments;return new Promise((function(r,o){var i=e.apply(n,t);function c(e){Be(i,r,o,c,a,"next",e)}function a(e){Be(i,r,o,c,a,"throw",e)}c(void 0)}))}}function Oe(e){return function(e){if(Array.isArray(e))return Re(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,n){if(!e)return;if("string"===typeof e)return Re(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Re(e,n)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Fe(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function Me(e,n,t,r,o,i,c){try{var a=e[i](c),u=a.value}catch(s){return void t(s)}a.done?n(u):Promise.resolve(u).then(r,o)}function Le(e){return function(e){if(Array.isArray(e))return Fe(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,n){if(!e)return;if("string"===typeof e)return Fe(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Fe(e,n)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function We(e){var n=e.amount,t=(0,P.wO)((0,Z.n)(P.aF,n,{alreadyDecimaled:!0}));return(0,k.Z)(function(){var e,r=(e=o().mark((function e(r){var i,c,a,u,s,l,d,f,m,p,v,h;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=r.transactionCollector,c=r.baseUtils,a=c.owner,u=c.connection,l=(0,S.p)(),d=A.Z.getState().allTokenAccounts,f=d.filter((function(e){return(0,R.Z)(e.mint)===(0,R.Z)(P.DA)})),m=f.sort((function(e,n){return e.isAssociated?-1:n.isAssociated||(0,w.lt)(e.amount,n.amount)?1:-1})),e.next=8,y.RGo.makeCreateWrappedNativeAccountInstructions({connection:u,owner:new Te.nh(a),payer:new Te.nh(a),amount:t.raw});case 8:return p=e.sent,v=p.instructions,h=p.newAccount,(s=l).addInstruction.apply(s,Le(v)),l.addSigner(h),m.length&&(l.addInstruction(y.RGo.makeTransferInstruction({destination:m[0].publicKey,source:h.publicKey,amount:t.raw,owner:new Te.nh(a)})),l.addEndInstruction(y.RGo.makeCloseAccountInstruction({owner:a,payer:a,tokenAccount:h.publicKey}))),e.t0=i,e.next=17,l.spawnTransaction();case 17:e.t1=e.sent,e.t2={txHistoryInfo:{title:"Wrap",description:"".concat((0,j.B)(n)," SOL \u21e2 ").concat((0,j.B)(n)," WSOL")}},e.t0.add.call(e.t0,e.t1,e.t2);case 20:case"end":return e.stop()}}),e)})),function(){var n=this,t=arguments;return new Promise((function(r,o){var i=e.apply(n,t);function c(e){Me(i,r,o,c,a,"next",e)}function a(e){Me(i,r,o,c,a,"throw",e)}c(void 0)}))});return function(e){return r.apply(this,arguments)}}())}function qe(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function Ue(e,n,t,r,o,i,c){try{var a=e[i](c),u=a.value}catch(s){return void t(s)}a.done?n(u):Promise.resolve(u).then(r,o)}function $e(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,o,i=[],c=!0,a=!1;try{for(t=t.call(e);!(c=(r=t.next()).done)&&(i.push(r.value),!n||i.length!==n);c=!0);}catch(u){a=!0,o=u}finally{try{c||null==t.return||t.return()}finally{if(a)throw o}}return i}}(e,n)||He(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _e(e){return function(e){if(Array.isArray(e))return qe(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||He(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function He(e,n){if(e){if("string"===typeof e)return qe(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(t):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?qe(e,n):void 0}}function ze(){return function(){var e=(0,G.ZP)((function(e){return e.getToken}));(0,c.useEffect)((function(){var n=C.Z.getState(),t=n.coin1,r=n.coin2;t||(0,R.Z)(null===r||void 0===r?void 0:r.mint)===(0,R.Z)(P.aF.mint)||C.Z.setState({coin1:P.aF}),r||(0,R.Z)(null===t||void 0===t?void 0:t.mint)===(0,R.Z)(K.PD)||C.Z.setState({coin2:e(K.PD)})}),[e])}(),J(),_(),null}var Ve=(0,Ze.Z)({hasAcceptedPriceChange:!1,coinInputBox1ComponentRef:(0,c.createRef)(),coinInputBox2ComponentRef:(0,c.createRef)(),swapButtonComponentRef:(0,c.createRef)()}),Ge=Ve.ContextProvider,Ke=Ve.useStore;function Ye(){return(0,i.jsxs)(Ge,{children:[(0,i.jsx)(ze,{}),(0,i.jsxs)(fe.Z,{mobileBarTitle:"Swap",metaTitle:"Swap - Raydium",children:[(0,i.jsx)(Xe,{}),(0,i.jsx)(Je,{}),(0,i.jsx)(ln,{})]})]})}function Xe(){return(0,i.jsx)(pe.Z,{className:"justify-center mb-12 mobile:mb-2",children:(0,i.jsx)(ve.Z,{currentValue:"Swap",values:["Swap","Liquidity"],onChange:function(e){"Liquidity"===e&&(0,l.E)("/liquidity/add")}})})}function Je(){var e=(0,A.Z)().connected,n=(0,C.Z)((function(e){return e.coin1})),t=(0,C.Z)((function(e){return e.coin2})),r=(0,C.Z)((function(e){return e.coin1Amount})),a=(0,C.Z)((function(e){return e.coin2Amount})),l=(0,C.Z)((function(e){return e.directionReversed})),d=(0,C.Z)((function(e){return e.priceImpact})),f=(0,C.Z)((function(e){return e.refreshSwap})),m=(0,A.Z)((function(e){return e.balances})),p=(0,C.Z)((function(e){return e.routes})),v=(0,C.Z)((function(e){return e.swapable})),h=(0,G.ZP)((function(e){return e.refreshTokenPrice})),x=function(){var e=(0,C.Z)((function(e){return e.directionReversed})),n=(0,C.Z)((function(e){return e.coin1})),t=(0,C.Z)((function(e){return e.coin2})),r=e?n:t,o=(0,G.ZP)((function(e){var n;return null===(n=e.tokenListSettings[G.pI])||void 0===n?void 0:n.mints})),a=$e((0,ke.Z)("USER_CONFIRMED_SWAP_TOKENS"),2),u=a[0],l=a[1],d=Boolean(r&&(!o||o.has(String(null===r||void 0===r?void 0:r.mint)))),f=Boolean(r&&(null===u||void 0===u?void 0:u.includes(String(null===r||void 0===r?void 0:r.mint)))),m=(0,c.useState)(!1),p=m[0],v=m[1],h=(0,c.useState)(!1),x=h[0],y=h[1];(0,c.useEffect)((function(){v(!1)}),[r]);var b=function(){x||(y(!0),s.Z.getState().popConfirm({cardWidth:"lg",type:"warning",title:"Confirm Token",description:(0,i.jsxs)("div",{className:"space-y-2 text-left",children:[(0,i.jsx)("p",{children:"This token does not appear on the default token list. Anyone can create an SPL token on Solana, which may include fake versions of existing tokens or tokens that claim to represent projects that do not have a token. Take extra caution to confirm token addresses."}),(0,i.jsx)("p",{children:"Always check the quoted price and that the pool has sufficient liquidity before trading."})]}),onlyConfirmButton:!0,confirmButtonText:"I Understand",additionalContent:(0,i.jsx)(ne.X,{defaultChecked:f,className:"my-2 w-max mx-auto",onChange:function(e){(null===r||void 0===r?void 0:r.mint)&&l(e?function(e){return(0,N.jX)(null!==e&&void 0!==e?e:[],String(r.mint))}:function(e){return(0,N.cl)(null!==e&&void 0!==e?e:[],String(r.mint))})},label:(0,i.jsx)("div",{className:"text-sm italic text-[rgba(171,196,255,0.5)]",children:"Do not warn again"})}),onConfirm:function(){v(!0),y(!1)},onCancel:function(){v(!1),y(!1),C.Z.setState(e?{coin1:void 0}:{coin2:void 0})}}))},g=d||f||p;return(0,c.useEffect)((function(){!g&&r&&b()}),[r,g]),{hasConfirmed:g,popConfirm:b}}(),g=x.hasConfirmed,I=x.popConfirm,E=Ke(),B=E.hasAcceptedPriceChange,D=E.swapButtonComponentRef,O=E.coinInputBox1ComponentRef,F=E.coinInputBox2ComponentRef,M=(0,A.Z)((function(e){return e.checkWalletHasEnoughBalance})),L=l?t:n,W=(l?a:r)||"0",q=l?n:t,U=(l?r:a)||"0",$=(0,c.useMemo)((function(){return L&&M((0,Z.n)(L,W,{alreadyDecimaled:!0}))}),[L,W,M,m]),_=(0,c.useCallback)((function(){C.Z.setState((function(e){return{directionReversed:!e.directionReversed}}))}),[]),H=$e((0,Ce.ZP)(),2),z=H[0],V=H[1],K=V.on,Y=V.off,X=(0,c.useState)("1"),J=X[0],ee=X[1],te=(0,C.Z)((function(e){return e.executionPrice})),oe=(0,c.useRef)(null),ie=(0,c.useRef)(null),le=$e(Ne(oe,ie,{defaultHasWrapped:l}),2),de=le[0],fe=le[1].toggleSwap;(0,c.useEffect)((function(){C.Z.setState({directionReversed:de})}),[de]);var ve=n&&(0,w.$u)(r)&&t&&(0,w.$u)(a)&&te,he=(0,c.useRef)(null);(0,c.useEffect)((function(){C.Z.setState({scrollToInputBox:function(){var e;return null===(e=he.current)||void 0===e?void 0:e.scrollIntoView({behavior:"smooth",block:"center"})}})}),[]);var xe,ye,Ze=(0,u.Z)((function(e){return e.isApprovePanelShown}));return(0,i.jsxs)(ce.Z,{domRef:he,wrapperClassName:"w-[min(456px,100%)] self-center cyberpunk-bg-light",className:"py-8 pt-4 px-6 mobile:py-5 mobile:px-3",size:"lg",style:{background:"linear-gradient(140.14deg, rgba(0, 182, 191, 0.15) 0%, rgba(27, 22, 89, 0.1) 86.61%), linear-gradient(321.82deg, #18134D 0%, #1B1659 100%)"},children:[(0,i.jsxs)("div",{className:"space-y-5 mt-5",children:[(0,i.jsx)(re.Z,{domRef:oe,disabled:Ze,disabledInput:l,componentRef:O,haveHalfButton:!0,haveCoinIcon:!0,canSelect:!0,topLeftLabel:de?"To":"From",onTryToTokenSelect:function(){K(),ee("1")},onEnter:function(e){var n,r,o,i;e&&(t||null===(n=F.current)||void 0===n||null===(r=n.selectToken)||void 0===r||r.call(n),t&&a&&(null===(o=D.current)||void 0===o||null===(i=o.click)||void 0===i||i.call(o)))},token:n,value:r?(0,w.eq)(r,0)?"":(0,j.B)(r):void 0,onUserInput:function(e){C.Z.setState({focusSide:"coin1",coin1Amount:e})}}),(0,i.jsxs)("div",{className:"relative h-8",children:[(0,i.jsxs)(pe.Z,{className:"absolute items-center transition-all ".concat(te?"left-4":"left-1/2 -translate-x-1/2"),children:[(0,i.jsx)(se.Z,{size:"sm",iconSrc:"/icons/msic-swap.svg",className:"p-2 frosted-glass frosted-glass-teal rounded-full mr-4 ".concat(Ze?"not-clickable":"clickable"," select-none transition"),onClick:function(){Ze||(fe(),_())}}),te&&(0,i.jsx)("div",{className:"absolute left-full",children:(0,i.jsx)(on,{})})]}),(0,i.jsx)("div",{className:"absolute right-0",children:(0,i.jsx)(me.Z,{run:!Ze,refreshKey:"swap",popPlacement:"right-bottom",freshFunction:function(){f(),h()}})})]}),(0,i.jsx)(re.Z,{domRef:ie,disabled:Ze,disabledInput:!l,componentRef:F,haveHalfButton:!0,haveCoinIcon:!0,canSelect:!0,topLeftLabel:de?"From":"To",onTryToTokenSelect:function(){K(),ee("2")},onEnter:function(e){var t,o,i,c;e&&(n||null===(t=O.current)||void 0===t||null===(o=t.selectToken)||void 0===o||o.call(t),n&&r&&(null===(i=D.current)||void 0===i||null===(c=i.click)||void 0===c||c.call(i)))},token:t,value:a?(0,w.eq)(a,0)?"":(0,j.B)(a):void 0,onUserInput:function(e){C.Z.setState({focusSide:"coin2",coin2Amount:e})}})]}),(0,i.jsx)(ue.Z,{show:ve,children:(0,i.jsx)(cn,{className:"mt-5"})}),(0,i.jsx)(tn,{}),Qe(L,q)||en(L,q)?(0,i.jsx)(Q.Z,{className:"w-full frosted-glass-teal mt-5",componentRef:D,validators:[{should:e,forceActive:!0,fallbackProps:{onClick:function(){return u.Z.setState({isWalletSelectorShown:!0})},children:"Connect Wallet"}},{should:W&&(0,w.$u)(W)&&U&&(0,w.$u)(U),fallbackProps:{children:"Enter an amount"}},{should:$,fallbackProps:{children:"Insufficient ".concat(null!==(xe=null===L||void 0===L?void 0:L.symbol)&&void 0!==xe?xe:""," balance")}}],onClick:function(){return en(L,q)?function(e){var n=e.amount,t=(0,ge.dC)(n,Math.pow(10,P.Vb.decimals));return(0,k.Z)(function(){var e=De(o().mark((function e(r){var i,c,a,u,s,l,d,f,m,p,v,h,x,g,Z,k;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=r.transactionCollector,c=r.baseUtils,a=c.owner,u=c.connection,l=A.Z.getState(),d=l.allTokenAccounts,f=l.allWsolBalance,(0,b.Z)((0,w.eg)(f,t),"not enough wsol to unwrap"),m=d.filter((function(e){return(0,R.Z)(e.mint)===(0,R.Z)(P.DA)})),p=m.sort((function(e,n){return e.isAssociated?1:n.isAssociated||(0,w.lt)(e.amount,n.amount)?-1:1})),v=(0,S.p)(),e.next=9,y.RGo.makeCreateWrappedNativeAccountInstructions({connection:u,owner:new Te.nh(a),payer:new Te.nh(a),amount:0});case 9:h=e.sent,x=h.instructions,g=h.newAccount,(s=v).addInstruction.apply(s,Oe(x)),v.addSigner(g),v.addEndInstruction(y.RGo.makeCloseAccountInstruction({owner:a,payer:a,tokenAccount:g.publicKey})),Z=t,k=0;case 17:if(!(0,w.gt)(Z,0)||!p[k]){e.next=26;break}if(!(0,w.eg)(Z,p[k].amount)){e.next=22;break}v.addInstruction(y.RGo.makeCloseAccountInstruction({owner:a,payer:a,tokenAccount:p[k].publicKey})),Z=(0,ge.lu)(Z,p[k].amount),k++,e.next=24;break;case 22:return v.addInstruction(y.RGo.makeTransferInstruction({destination:g.publicKey,source:p[k].publicKey,amount:(0,Ee.Z)(Z),owner:new Te.nh(a)})),e.abrupt("break",26);case 24:e.next=17;break;case 26:return e.t0=i,e.next=29,v.spawnTransaction();case 29:e.t1=e.sent,e.t2={txHistoryInfo:{title:"Unwrap",description:"".concat((0,j.B)(n)," WSOL \u21e2 ").concat((0,j.B)(n)," SOL")}},e.t0.add.call(e.t0,e.t1,e.t2);case 32:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}())}({amount:U}):We({amount:U})},children:en(L,q)?"Unwrap":"Wrap"}):(0,i.jsx)(Q.Z,{className:"w-full frosted-glass-teal mt-5",componentRef:D,validators:[{should:e,forceActive:!0,fallbackProps:{onClick:function(){return u.Z.setState({isWalletSelectorShown:!0})},children:"Connect Wallet"}},{should:L&&q,fallbackProps:{children:"Select a token"}},{should:g,forceActive:!0,fallbackProps:{onClick:I,children:"Confirm unOfficial warning"}},{should:!1!==v,fallbackProps:{children:"Pool Not Ready"}},{should:p,fallbackProps:{children:"Finding Pool ..."}},{should:!0===v||0===(null===p||void 0===p?void 0:p.length),fallbackProps:{children:"Pool Not Found"}},{should:W&&(0,w.$u)(W)&&U&&(0,w.$u)(U),fallbackProps:{children:"Enter an amount"}},{should:$,fallbackProps:{children:"Insufficient ".concat(null!==(ye=null===L||void 0===L?void 0:L.symbol)&&void 0!==ye?ye:""," balance")}},{should:d&&(0,w.G)(d,.05),forceActive:!0,fallbackProps:{onClick:function(){return function(e){var n=e.priceImpact;s.Z.getState().popConfirm({type:"error",title:"Price Impact Warning",description:(0,i.jsxs)("div",{children:["Price impact is"," ",n?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("span",{className:"text-[#DA2EEF]",children:(0,be.Z)(n)})," which is"," "]}):"",(0,i.jsx)("span",{className:"text-[#DA2EEF]",children:"higher than 5%."})," Try a smaller trade!"]}),confirmButtonText:"Swap Anyway",onConfirm:T})}({priceImpact:d})}}},{should:B,fallbackProps:{children:"Accept price change"}}],onClick:T,children:"Swap"}),(0,i.jsx)(rn,{}),(0,i.jsx)(ae.Z,{open:z,onSelectCoin:function(e){"1"===J?(C.Z.setState({coin1:e}),nn(e,t)||C.Z.setState({coin2:void 0})):(C.Z.setState({coin2:e}),nn(e,n)||C.Z.setState({coin1:void 0})),Y()},close:Y})]})}function Qe(e,n){return(0,P.Dn)(e)&&(0,P.Ee)(n)}function en(e,n){return(0,P.Ee)(e)&&(0,P.Dn)(n)}function nn(e,n){return Qe(e,n)||en(e,n)||!(0,L.aT)(null===e||void 0===e?void 0:e.mint,null===n||void 0===n?void 0:n.mint)}function tn(){var e=Ke(),n=e.hasAcceptedPriceChange,t=e.setHasAcceptedPriceChange,r=(0,C.Z)((function(e){return e.coin1})),o=(0,C.Z)((function(e){return e.coin2})),a=(0,C.Z)((function(e){return e.coin1Amount})),u=(0,C.Z)((function(e){return e.coin2Amount})),s=(0,C.Z)((function(e){return e.directionReversed})),l=s?"coin2":"coin1",d="coin1"===l?r:o,f="coin1"===l?a:u,m="coin1"===l?o:r,p="coin1"===l?u:a,v=(0,c.useRef)(!1);(0,Ae.P)((function(e){var n=$e(e,5),r=n[0],o=n[1],i=n[2],c=n[3],a=n[4],u=null!=r&&r!==d,l=Boolean(f&&(0,w.$u)(o)&&!(0,w.eq)(o,f)),h=null!=i&&i!==m,x=Boolean(p&&(0,w.$u)(c)&&!(0,w.eq)(c,p)),y=null!=a&&a!==s,b=!u&&!l&&!h&&!x&&!y,g=!b&&(l||u||h||y);b?t(!0):g?(t(!0),v.current=!0):x&&(v.current||l||t(!x),v.current=!1)}),[d,f,m,p,s]);var h=(0,w.$u)(a)&&(0,w.$u)(u);return(0,i.jsx)(ue.U,{children:h&&!n&&(0,i.jsxs)(pe.Z,{className:"mt-5 bg-[#141041] rounded-xl py-2 px-6 mobile:px-4 items-center justify-between",children:[(0,i.jsxs)(pe.Z,{className:"text-sm font-medium text-[#ABC4FF] items-center ",children:["Price updated",(0,i.jsxs)(he.Z,{placement:"bottom-right",children:[(0,i.jsx)(se.Z,{size:"sm",heroIconName:"question-mark-circle",className:"ml-2 cursor-help"}),(0,i.jsx)(he.Z.Panel,{children:(0,i.jsx)("p",{className:"w-80",children:"Price has changed since your swap amount was entered."})})]})]}),(0,i.jsx)(Q.Z,{size:"sm",className:"frosted-glass-teal",onClick:function(){return t(!0)},children:"Accept"})]})})}function rn(){var e=(0,A.Z)((function(e){return e.solBalance})),n=(0,ge.hi)(e,Math.pow(10,P.Bk));return(0,i.jsx)(ue.U,{children:n&&(0,w.lt)(n,P.kn)&&(0,w.eg)(n,0)&&(0,i.jsxs)(pe.Z,{className:"text-sm mt-4 text-[#D8CB39] items-center justify-center",children:["SOL balance: ",(0,j.B)(n)," ",(0,i.jsxs)(he.Z,{placement:"bottom-right",children:[(0,i.jsx)(se.Z,{size:"sm",heroIconName:"question-mark-circle",className:"ml-2 cursor-help"}),(0,i.jsx)(he.Z.Panel,{children:(0,i.jsxs)("p",{className:"w-80",children:["SOL is needed for Solana network fees. A minimum balance of ",P.kn," SOL is recommended to avoid failed transactions. This swap will leave you with less than ",P.kn," SOL."]})})]})]})})}function on(e){var n,t,r=e.className,o=(0,c.useState)(!1),s=o[0],l=o[1],d=(0,C.Z)((function(e){return e.coin1})),f=(0,C.Z)((function(e){return e.coin2})),m=(0,C.Z)((function(e){return e.directionReversed})),p=m?f:d,v=m?d:f,h=(0,C.Z)((function(e){return e.executionPrice})),x=(0,C.Z)((function(e){return e.priceImpact})),y=(0,c.useMemo)((function(){return null!=x&&(0,w.eg)(x,.05)}),[x]),b=(0,c.useMemo)((function(){return null!=x&&(0,w.eg)(x,.01)}),[x]),g=(0,u.Z)((function(e){return e.isMobile})),Z=s?v:p,S=s?p:v;return(0,i.jsxs)(oe.Z,{children:[(0,i.jsx)(ue.U,{children:h&&(0,i.jsxs)(pe.Z,{className:(0,a.m)("font-medium text-sm text-[#ABC4FF]",r),children:[(0,i.jsxs)("div",{className:"whitespace-nowrap",children:[1," ",null!==(n=null===Z||void 0===Z?void 0:Z.symbol)&&void 0!==n?n:"--"," \u2248"," ",(0,j.B)(s?(0,ge.hi)(1,h):h,{decimalLength:g?"auto 2":"auto",zeroDecimalNotAuto:!0})," ",null!==(t=null===S||void 0===S?void 0:S.symbol)&&void 0!==t?t:"--"]}),(0,i.jsx)("div",{className:"ml-2 clickable",onClick:function(){return l((function(e){return!e}))},children:"\u21cb"})]})}),(0,i.jsx)(ue.U,{children:x?(0,i.jsx)("div",{className:"font-medium text-xs whitespace-nowrap ".concat(y?"text-[#DA2EEF]":b?"text-[#D8CB39]":"text-[#39D0D8]"," transition-colors"),children:y||b?"Price Impact Warning":"Low Price Impact"}):null})]})}function cn(e){var n,t,r,o,s,l,d=e.className,f=(0,C.Z)((function(e){return e.priceImpact})),m=(0,C.Z)((function(e){return e.coin1})),p=(0,C.Z)((function(e){return e.coin2})),v=(0,C.Z)((function(e){return e.directionReversed})),h=v?p:m,x=v?m:p,y=(0,C.Z)((function(e){return e.focusSide})),b=(0,C.Z)((function(e){return e.minReceived})),g=(0,C.Z)((function(e){return e.fee})),Z=(0,C.Z)((function(e){return e.maxSpent})),S=(0,C.Z)((function(e){return e.routes})),k=(0,u.Z)((function(e){return e.slippageTolerance})),A=(0,G.ZP)((function(e){return e.getToken})),N=(0,c.useMemo)((function(){return null!=f&&(0,w.eg)(f,.05)}),[f]),I=(0,c.useMemo)((function(){return null!=f&&(0,w.eg)(f,.01)}),[f]),T=h&&x&&(null===S||void 0===S?void 0:S.length)?1===S.length?"serum"===S[0].source?"Serum Market":"Raydium Pool":"".concat(null===h||void 0===h?void 0:h.symbol," \u2192 ").concat(null===(n=A((o={routes:S,upCoin:h,downCoin:x},o.routes.flatMap((function(e){return[(0,R.Z)(e.keys.baseMint),(0,R.Z)(e.keys.quoteMint)]})).find((function(e){return![(0,R.Z)(o.upCoin.mint),(0,R.Z)(o.downCoin.mint)].includes(e)})))))||void 0===n?void 0:n.symbol," \u2192 ").concat(null===x||void 0===x?void 0:x.symbol):void 0,E=(0,u.Z)((function(e){return e.isApprovePanelShown})),B=(0,c.useMemo)((function(){return Boolean(null===S||void 0===S?void 0:S.some((function(e){return 5===e.keys.version})))}),[S]);return(0,i.jsxs)(oe.Z,{className:(0,a.m)("py-4 px-6 flex-grow border-1.5  ".concat(N?"border-[#DA2EEF]":I?"border-[rgba(216,203,57,.5)]":"border-[rgba(171,196,255,.5)]"," rounded-xl items-center gap-3 transition-colors"),d),children:[T&&(0,i.jsx)(an,{fieldName:"Swapping Through",fieldValue:(0,i.jsxs)(pe.Z,{className:"items-center gap-2",children:[B&&(0,i.jsx)(Ie.C,{className:"self-center",children:"Stable"}),(0,i.jsx)("div",{children:T})]}),tooltipContent:"This venue gave the best price for your trade"}),Z?(0,i.jsx)(an,{fieldName:"Maximum Spent",fieldValue:"".concat(null!==Z&&void 0!==Z?Z:""," ").concat(null!==(s=null===(t="coin1"===y?p:m)||void 0===t?void 0:t.symbol)&&void 0!==s?s:"--"),tooltipContent:"The max amount of tokens you will spend on this trade"}):(0,i.jsx)(an,{fieldName:"Minimum Received",fieldValue:"".concat(null!==b&&void 0!==b?b:""," ").concat(null!==(l=null===(r="coin1"===y?p:m)||void 0===r?void 0:r.symbol)&&void 0!==l?l:"--"),tooltipContent:"The least amount of tokens you will recieve on this trade"}),(0,i.jsx)(an,{fieldName:"Price Impact",fieldNameTextColor:N?"#DA2EEF":I?"#D8CB39":void 0,fieldValue:f?(0,w.lt)(f,.001)?"<0.1%":(0,be.Z)(f):"--",fieldValueTextColor:N?"#DA2EEF":I?"#D8CB39":"#39D0D8",tooltipContent:"The difference between the market price and estimated price due to trade size"}),(0,i.jsxs)(ie.Z,{openDirection:"upwards",className:"w-full",children:[(0,i.jsx)(ie.Z.Body,{children:(0,i.jsxs)(oe.Z,{className:"gap-3 pb-3",children:[(0,i.jsx)(an,{fieldName:"Addresses",tooltipContent:(0,i.jsx)(un,{})}),(0,i.jsx)(an,{fieldName:"Slippage Tolerance",tooltipContent:"The maximum difference between your estimated price and execution price",fieldValue:(0,i.jsxs)(pe.Z,{className:"py-1 px-2 bg-[#141041] rounded-sm text-[#F1F1F2] font-medium text-xs -my-1",children:[(0,i.jsx)(le.Z,{className:"w-6",disabled:E,value:(0,j.B)((0,ge.dC)(k,100),{decimalLength:"auto 2"}),onUserInput:function(e){var n=(0,ge.hi)(parseFloat(e),100);n&&u.Z.setState({slippageTolerance:n})},pattern:/^\d*\.?\d*$/}),(0,i.jsx)("div",{className:"opacity-50 ml-1",children:"%"})]})}),(0,i.jsx)(an,{fieldName:"Swap Fee",fieldValue:g?(0,i.jsx)(oe.Z,{children:g.map((function(e){var n,t,r=(0,P.wE)(e);return(0,i.jsxs)("div",{className:"text-right",children:[(0,j.B)(r)," ",null!==(t=null===(n=A(r.token.mint))||void 0===n?void 0:n.symbol)&&void 0!==t?t:"--"]},r.token.symbol)}))}):"--"})]})}),(0,i.jsx)(ie.Z.Face,{children:function(e){return(0,i.jsxs)(pe.Z,{className:"w-full items-center text-xs font-medium text-[rgba(171,196,255,0.5)] cursor-pointer select-none",children:[(0,i.jsx)("div",{children:e?"Show less":"More information"}),(0,i.jsx)(se.Z,{size:"xs",heroIconName:e?"chevron-up":"chevron-down",className:"ml-1"})]})}})]})]})}function an(e){var n=e.className,t=e.fieldName,r=e.fieldValue,o=e.tooltipContent,c=e.fieldNameTextColor,u=e.fieldValueTextColor;return(0,i.jsxs)(pe.Z,{className:(0,a.m)("w-full justify-between",n),children:[(0,i.jsxs)(pe.Z,{className:"items-center text-xs font-medium text-[#ABC4FF]",style:{color:c},children:[(0,i.jsx)("div",{className:"mr-1",children:t}),o&&(0,i.jsxs)(he.Z,{className:n,placement:"bottom-right",children:[(0,i.jsx)(se.Z,{size:"xs",heroIconName:"question-mark-circle",className:"cursor-help"}),(0,i.jsx)(he.Z.Panel,{children:o})]})]}),(0,i.jsx)("div",{className:"text-xs font-medium text-white",style:{color:u},children:r})]})}function un(){var e,n,t,r,o=(0,C.Z)((function(e){return e.coin1})),c=(0,C.Z)((function(e){return e.coin2})),a=(0,C.Z)((function(e){return e.routes}));return(0,i.jsxs)("div",{className:"w-60",children:[(0,i.jsx)("div",{className:"text-sm font-semibold mb-2",children:"Addresses"}),(0,i.jsxs)(oe.Z,{className:"gap-2",children:[(0,i.jsx)(sn,{label:null!==(e=null===o||void 0===o?void 0:o.symbol)&&void 0!==e?e:"--",type:"token",address:String(null!==(n=null===o||void 0===o?void 0:o.mint)&&void 0!==n?n:"--")}),(0,i.jsx)(sn,{label:null!==(t=null===c||void 0===c?void 0:c.symbol)&&void 0!==t?t:"--",type:"token",address:String(null!==(r=null===c||void 0===c?void 0:c.mint)&&void 0!==r?r:"--")}),(null===a||void 0===a?void 0:a.length)&&1===(null===a||void 0===a?void 0:a.length)?(0,i.jsxs)(i.Fragment,{children:[a[0].keys.marketId&&(0,i.jsx)(sn,{label:"Market ID",address:String(a[0].keys.marketId)}),a[0].keys.id&&(0,i.jsx)(sn,{label:"Amm ID",address:String(a[0].keys.id)})]}):(null===a||void 0===a?void 0:a.length)&&a.length>1?(0,i.jsxs)(i.Fragment,{children:[null===a||void 0===a?void 0:a.map((function(e,n){return(0,i.jsx)(sn,{label:"Market ID (route ".concat(n+1,")"),address:String(e.keys.marketId)},"market"+String(e.keys.id))})),null===a||void 0===a?void 0:a.map((function(e,n){return(0,i.jsx)(sn,{label:"Amm ID (route ".concat(n+1,")"),address:String(e.keys.id)},"amm"+String(e.keys.id))}))]}):null]})]})}function sn(e){var n=e.className,t=e.label,r=e.address,o=e.type,c=void 0===o?"account":o;return(0,i.jsxs)(pe.Z,{className:(0,a.m)("grid gap-2 items-center grid-cols-[5em,1fr,auto,auto]",n),children:[(0,i.jsx)("div",{className:"text-xs font-normal text-white",children:t}),(0,i.jsxs)(pe.Z,{className:"px-1 py-0.5 text-xs font-normal text-white bg-[#141041] rounded justify-center",children:[(0,i.jsx)("div",{className:"self-end overflow-hidden tracking-wide",children:r.slice(0,5)}),(0,i.jsx)("div",{className:"tracking-wide",children:"..."}),(0,i.jsx)("div",{className:"overflow-hidden tracking-wide",children:r.slice(-5)})]}),(0,i.jsxs)(pe.Z,{className:"gap-1 items-center",children:[(0,i.jsx)(se.Z,{size:"sm",heroIconName:"clipboard-copy",className:"clickable text-[#ABC4FF]",onClick:function(){(0,xe.Z)(r)}}),(0,i.jsx)(de.Z,{href:"https://solscan.io/".concat(c,"/").concat(r),children:(0,i.jsx)(se.Z,{size:"sm",heroIconName:"external-link",className:"clickable text-[#ABC4FF]"})})]})]})}function ln(){var e=(0,C.Z)((function(e){return e.coin1})),n=(0,C.Z)((function(e){return e.coin2})),t=(0,C.Z)((function(e){return e.directionReversed})),r=(0,c.useRef)(null),o=(0,c.useRef)(null),a=$e(Ne(r,o,{defaultHasWrapped:t}),2),u=a[0],s=a[1],l=s.toggleSwap,d=s.resetSwapPosition;(0,c.useEffect)((function(){var e,n,i=Boolean(null===(e=r.current)||void 0===e?void 0:e.clientHeight),c=Boolean(null===(n=o.current)||void 0===n?void 0:n.clientHeight);u!==t&&i&&c&&l()}),[t]);var f=(0,c.useState)(!1),m=f[0],p=f[1],v=(0,c.useState)(!1),h=v[0],x=v[1],y=(0,N.DB)([m,h]).length;return(0,Ae.P)((function(e){var n=$e(e,1)[0];y<(null!==n&&void 0!==n?n:0)&&d()}),[y]),(0,i.jsxs)(ee.Z,{className:"flex ".concat(m||h?"visible":"invisible"," flex-col mt-10 p-2 w-[min(456px,100%)] self-center"),size:"lg",style:{background:"linear-gradient(140.14deg, rgba(0, 182, 191, 0.15) 0%, rgba(27, 22, 89, 0.1) 86.61%), linear-gradient(321.82deg, #18134D 0%, #1B1659 100%)"},children:[(0,i.jsx)("div",{ref:r,children:(0,i.jsx)(dn,{coin:e,onDataChange:function(e){return p(e)}})}),(0,i.jsx)("div",{ref:o,children:(0,R.Z)(null===n||void 0===n?void 0:n.mint)!==(0,R.Z)(null===e||void 0===e?void 0:e.mint)&&(0,i.jsx)(dn,{coin:n,onDataChange:function(e){return x(e)}})})]})}function dn(e){var n,t,r,a,s=e.coin,l=e.onDataChange,d=[(0,R.Z)(K.LA),(0,R.Z)(K.q3)],f=(0,u.Z)((function(e){return e.isMobile})),m=(0,C.Z)((function(e){return e.refreshCount})),p=Se((n=o().mark((function e(){var n,t;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(null===s||void 0===s||null===(n=s.extensions)||void 0===n?void 0:n.coingeckoId)){e.next=7;break}return e.next=4,h(null===s||void 0===s||null===(t=s.extensions)||void 0===t?void 0:t.coingeckoId);case 4:e.t0=e.sent,e.next=8;break;case 7:e.t0=void 0;case 8:return e.abrupt("return",e.t0);case 9:case"end":return e.stop()}}),e)})),function(){var e=this,t=arguments;return new Promise((function(r,o){var i=n.apply(e,t);function c(e){Ue(i,r,o,c,a,"next",e)}function a(e){Ue(i,r,o,c,a,"throw",e)}c(void 0)}))}),[s,m]),v=null===p||void 0===p?void 0:p[0],x=null===p||void 0===p?void 0:p[p.length-1],y=(0,w.$u)(v)&&x?(x-v)/v:0,b=y>0,g=y<0,Z=Boolean(s&&!d.includes((0,R.Z)(s.mint))&&(null===p||void 0===p?void 0:p.length));return(0,c.useEffect)((function(){return function(){return null===l||void 0===l?void 0:l(!1)}}),[]),(0,c.useEffect)((function(){null===l||void 0===l||l(Z)}),[Z]),(0,i.jsx)(ue.U,{children:Z&&(0,i.jsxs)("div",{className:"flex mobile:grid mobile:grid-cols-3 mobile:gap-2 p-4 mobile:py-4 w-[min(456px,100%)] self-center items-center",children:[(0,i.jsx)(pe.Z,{className:"items-center mobile:justify-self-center w-16 mobile:w-8 flex-shrink-0",children:(0,i.jsxs)(oe.Z,{className:"gap-1 grow mobile:items-center",children:[(0,i.jsx)(te.Z,{token:s,size:f?"sm":"smi"}),(0,i.jsx)("div",{className:"font-medium text-sm text-[#abc4ff]",children:null!==(t=null===s||void 0===s?void 0:s.symbol)&&void 0!==t?t:"--"})]})}),(0,i.jsxs)(oe.Z,{className:"items-end mobile:items-center mobile:justify-self-center mobile:ml-0 grow",children:[(0,i.jsx)("div",{className:"text-xs font-medium text-[rgba(171,196,255,0.5)]",children:"Price"}),(0,i.jsx)("div",{className:"text-sm font-medium text-[#abc4ff] whitespace-nowrap",children:null!==(a="$"+(0,ye.Z)(null===x||void 0===x?void 0:x.toFixed((0,w.lt)(x,.1)?null!==(r=null===s||void 0===s?void 0:s.decimals)&&void 0!==r?r:4:2),{fractionLength:"auto"}))&&void 0!==a?a:"--"})]}),(0,i.jsxs)(oe.Z,{className:"items-start mobile:items-center mobile:justify-self-center ml-8 mobile:ml-0 w-8",children:[(0,i.jsx)("div",{className:"text-xs font-medium text-[rgba(171,196,255,0.5)]",children:"24H%"}),(0,i.jsx)("div",{className:"text-sm font-medium ".concat(b?"text-[#39D0D8]":g?"text-[#DA2EEF]":"text-[#abc4ff]"),children:(0,be.Z)(y,{alwaysSigned:!0})})]}),(0,i.jsx)(fn,{className:"ml-10 w-36 mobile:w-full h-12 mobile:col-span-full mobile:m-0 mobile:mt-4 flex-shrink-0",isPositive:b,isNegative:g,pricePoints:p})]})})}function fn(e){var n,t,r=e.className,o=e.isPositive,c=e.isNegative,a=e.pricePoints,u=o?"#39D0D8":c?"#DA2EEF":"#abc4ff",s=(n=Math).max.apply(n,_e(a)),l=(t=Math).min.apply(t,_e(a)),d=s-l,f=a.length;return(0,i.jsxs)("svg",{className:r,viewBox:"0 0 2000 1000",preserveAspectRatio:"none",children:[(0,i.jsx)("defs",{children:(0,i.jsxs)("filter",{id:"k-line-glow-".concat(o?"positive":c?"negative":"normal"),children:[(0,i.jsx)("feFlood",{result:"flood",floodColor:u,floodOpacity:".8"}),(0,i.jsx)("feComposite",{in:"flood",result:"mask",in2:"SourceGraphic",operator:"in"}),(0,i.jsx)("feMorphology",{in:"mask",result:"dilated",operator:"dilate",radius:"3"}),(0,i.jsx)("feGaussianBlur",{in:"dilated",result:"blurred",stdDeviation:"8"}),(0,i.jsxs)("feMerge",{children:[(0,i.jsx)("feMergeNode",{in:"blurred"}),(0,i.jsx)("feMergeNode",{in:"SourceGraphic"})]})]})}),(0,i.jsx)("g",{filter:"url(#k-line-glow-".concat(o?"positive":c?"negative":"normal",")"),children:Boolean(f)&&(d?(0,i.jsx)("polyline",{vectorEffect:"non-scaling-stroke",points:a.map((function(e,n){var t=function(e){var n=.1*s;return d>n?(d-(e-l))/d*1e3:1e3-1e3*((n-d)/2+(e-l))/n}(e);return"".concat(n/f*2e3,",").concat(t)})).join(" "),stroke:u,fill:"none"}):(0,i.jsx)("line",{x1:"0",y1:"499.9",x2:"2000",y2:"500",stroke:u,fill:"none",strokeWidth:"16"}))})]})}}},function(e){e.O(0,[241,143,41,907,505,774,888,179],(function(){return n=98229,e(e.s=n);var n}));var n=e.O();_N_E=n}]);